{% extends 'home/base.html' %}
{% load static %}

{% block content %}
    <nav id="navbar" class="navbar navbar-expand-md navbar-dark" style="background-color: black">
        <div class="container">
            <a class="navbar-brand" href="#">ðŸš€ My Django Project</a>

            {% if user.is_authenticated %}
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#nav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="nav">
                <ul class="navbar-nav ml-auto">
{#                    <li class="nav-item active">#}
{#                        <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>#}
{#                    </li>#}
                    <li class="nav-item"><a class="nav-link" href="/admin">Admin</a></li>
                    <li class="nav-item"><a class="nav-link" href="/accounts">Accounts</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url "user_list" %}">People</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url "shop:product_list" %}">Shop</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url "polls:index" %}">Polls</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url "simplesite1:index" %}">Simple site</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url "post_list" %}">Blog</a></li>

                </ul>
            </div>
            {% endif %}
        </div>
    </nav>


    <div class="content">
        {% if user.is_authenticated %}
{#            <div class="alert alert-info">#}
{#                <button type="button" class="close" data-dismiss="alert">&times;</button>#}
{#                !!!#}
{#            </div>#}
{#            <h1 class="greeting">Hello, {{ user.get_username }} âœ¨</h1>#}
            <h1 class="greeting"><b>Hello!</b> âœ¨</h1>
            <div id="btn1">
                <button class="btn btn-primary" type="button">Update</button>
            </div>


            <div class="data-container">
                <div class="flex-block">
                    <div>Keep evolve</div>
{#                    <hr>#}
                </div>
{#                <div>321</div>#}
{#                <div>123</div>#}
            </div>

            <div class="data-container" id="c2">
                <div class="flex-block">
                    <div>Date</div>
                    {{ date }}
                </div>
                <div class="flex-block" id="ping">
                    <div>Bot</div>
                    <div id="ping-data">{{ bot }}</div>

                </div>
                <div class="flex-block">
                    <div>title</div>
                </div>
            </div>

        {% else %}
            <h1 class="greeting">Welcome, new user.<br/>
                <b>Please <a href="admin/login/?next=/">log in</a></b></h1>
        {% endif %}

    </div>

    <footer class="footer">
        <div class="auth">
            {% if user.is_authenticated %}
                <a href="{% url 'logout' %}">Log out</a>
            {% else %}
                <a href="admin/login/?next=/">Login</a>
            {% endif %}
        </div>
        <p>2021</p>
    </footer>

{#    {% if user.is_authenticated %}#}
{#    <script src="{% static 'js path' %}"></script>#}
{#    {% endif %}#}

    {% if user.is_authenticated %}
    <script type="application/javascript">
        "use strict";

        function setAttrs(el, attrs){
            for(let key in attrs){
                el.setAttribute(attrs[key])
            }
        }

        function addActive(item){
        }

        window.onload = function () {
            let item = document.querySelector("#ping")
            {#document.querySelectorAll("#ping, #btn")#}
            let data1 = document.querySelector("#ping-data")
            let btn1 = document.querySelector("#btn1")

            let a = [item, btn1]
            a.forEach(item =>
                {#item.onclick = () => {#}
                item.addEventListener('click', event => {
                fetch("{% url "home:ping" %}").then(function(response) {
                    // data.innerHTML = response.json()
                    // first parse response then use value
                    return response.text();
                }).then(function(data) {
                    console.log(data);
                    {#console.log(item.id, item.id === '#ping');#}

                    data1.innerHTML = data
                    if (item.id === 'ping'){
                        if (item.classList.contains('active')) {
                            item.classList.remove("active");
                        } else {
                            item.classList.add("active");
                        }
                    }
                })
            }
            ))
        }
    </script>
    {% endif %}

{#lib scripts#}
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>


    {#    <script id="hello-data">#}
{#    {% block domready %}#}
{#    "use strict";#}
{##}
{#window.onload = function () {#}
{#    let item = document.querySelector("#ping")#}
{#    let data = document.querySelector("#ping-data")#}
{##}
{#    item.onclick = () => {#}
{#        fetch("http://127.0.0.1:8000/ping").then(function(response) {#}
{#        data.innerHTML = response.json()#}
{#        return response.json();#}
{#    }).then(function(data) {#}
{#        console.log(data);#}
{#    })#}
{#    }#}
{#    </script>#}

{% endblock %}



{#    old header#}
{#    <div class="header">#}
{#        <a href="{% url 'post_list' %}">GO TO BLOG</a>#}
{#        if logged?:#}
{#            <a href="{% url 'django1:admin_page' %}">ADMIN</a>#}
{#        <a href="/admin">ADMIN</a>#}
{#        <a href="/accounts">Accounts</a>#}
{#        <a href="{% url "user_list" %}">People</a>#}
{#        <a href="{% url "shop:product_list" %}">Shop</a>#}
{#     <li {% if section == "people" %}class="selected"{% endif %}> </li>#}
{#    </div>#}