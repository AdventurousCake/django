{% extends 'home/base.html' %}

{#MAY INCLUDE STATIC FROM MAIN PAGE#}
{% load static %}
{% load custom_tags %}


{% block title %}{{ title }}{% endblock %}

{% block content %}
    <div class="row justify-content-center">
        <div class="col-md-8 p-5">
            <h1 class="p-1">Please fill the form</h1>

            {#            {% if error %}#}
            {#                <p>ERR: {{ error }}</p>#}
            {#            {% endif %}#}

            <div class="card">
                <div class="card-header">{{ title }}</div>
                <div class="card-body">

{#                    {% for error in form.errors %}#}
{#                        <div class="alert alert-danger" role="alert">#}
{#                            <span>❗ {{ error|capfirst }}</span>#}
{#                        </div>#}
{#                    {% endfor %}#}

                    {% if form.errors %}
                        <div class="alert alert-danger" role="alert">
                            <span style="display: flex">
                                ❗ {{ form.errors }}
                            </span>
                        </div>
                    {% endif %}

                    <form method="post" enctype="multipart/form-data">
{#                        CSRF#}
                        {% csrf_token %}

                        {% for field in form %}
                            <div class="form-group row"
                                 aria-required={% if field.field.required %}"true"{% else %}"false"{% endif %}
                            </div>

                            <label for="{{ field.id_for_label }}" class="col-md-3 col-form-label text-md-right">
                                {{ field.label }}
                                {% if field.field.required %}<span class="required">*</span>{% endif %}

                                {% if field.help_text %}
                                    <small id="{{ field.id_for_label }}-help"
                                           class="form-text text-muted">{{ field.help_text|safe }}</small>
                                {% endif %}

                            </label>

                            {# input, width9 #}
                            <div class="col-md-9">
                                {# input tag #}
                                {{ field|addclass:"form-control" }}
                            </div>

                            </div>
                        {% endfor %}

                    <div class="row justify-content-center"> {# col-md-6 offset-md-4 #}
                        <button type="submit" class="btn btn-primary">
                            {{ btn_caption }}
                        </button>
                    </div>
                </form>

            </div> <!-- card body -->
        </div> <!-- card -->

{#    list of msgs#}

    <div class="table-responsive mt-4">
    <table class="table table-striped">
        <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Author</th>
              <th scope="col">Id</th>
              <th scope="col">Name</th>
              <th scope="col">Text</th>
              <th scope="col">Date</th>
            </tr>
        </thead>

        <tbody>
            {% for item in data %}
                <tr>
                  <th scope="row">{{ forloop.counter }}</th>
                  <td>{{ item.author }}</td>
                  <td>{{ item.id }}</td>
                  <td>{{ item.name }}</td>
                  <td>{{ item.text }}</td>
                  <td>{{ item.created_date }}</td>
                </tr>
            {% endfor %}
        </tbody>

    </table>

    </div>

    </div> <!-- col -->
    </div> <!-- row -->
{% endblock %}